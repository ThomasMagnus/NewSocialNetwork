document.addEventListener("DOMContentLoaded",()=>{"use strict";const e=document.querySelector(".reg__form"),r=e.querySelectorAll("input"),t=e.querySelector("#id_password1"),o=e.querySelector("#id_password2"),s=document.querySelector(".error__inputs"),a=document.querySelector(".error__text"),c=e.querySelector(".enter__btn");(()=>{let l=!0;const n="Пароли не совпадают",d="Не все поля заполнены",i="Пользователь с таким email уже существует",u="Пользователь с таким логином уже существует",m=e=>{a.classList.add("error__active"),s.textContent=e},v=()=>{s.textContent="",a.classList.remove(".error__active")},_=s=>{s.preventDefault();const a=new FormData(e);(()=>{let e;r.forEach(e=>{e.value.match(/[a-zа-я0-9]/gi)?e.classList.remove("error"):e.classList.add("error")});for(let t=0;t<=r.length-1;t++){if(!r[t].value.match(/[a-zа-я0-9]/gi))return e=!1,void m(d);v(),e=!0}return e})()&&(t.value!==o.value?(l=!1,m(n),t.classList.add("error"),o.classList.add("error")):(l=!0,v(),t.classList.remove("error"),o.classList.remove("error")),l&&fetch("/reg/",{method:"POST",body:a}).then(e=>e.text()).then(e=>{e!==i&&e!==u||m(e)}))};c.addEventListener("click",e=>_(e))})()});